<!DOCTYPE html>
<!-- saved from url=(0055)file:///Users/hangyeolkim/Downloads/dice_game_v3_2.html -->
<html lang="ko"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 20px;
    }

    /* ê²Œì„ ì„¤ëª… ëª¨ë‹¬ */
    .modal {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.8);
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }

    .modal-content {
      background: white;
      padding: 40px;
      border-radius: 20px;
      max-width: 500px;
      text-align: center;
      box-shadow: 0 10px 50px rgba(0, 0, 0, 0.3);
    }

    .modal-content h2 {
      font-size: 28px;
      margin-bottom: 20px;
      color: #667eea;
    }

    .modal-content p {
      font-size: 16px;
      line-height: 1.8;
      margin-bottom: 15px;
      color: #333;
    }

    .modal-content .confirm-btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 15px 40px;
      font-size: 18px;
      border-radius: 50px;
      cursor: pointer;
      margin-top: 20px;
      transition: transform 0.2s, background 0.2s;
    }

    .modal-content .confirm-btn:hover {
      background: #5568d3;
      transform: scale(1.05);
    }

    .hidden {
      display: none;
    }

    /* ê²Œì„ ì»¨í…Œì´ë„ˆ */
    .game-container {
      background: white;
      border-radius: 20px;
      padding: 25px;
      max-width: 700px;
      width: 100%;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
    }

    h1 {
      text-align: center;
      color: #667eea;
      margin-bottom: 20px;
      font-size: 28px;
    }

    /* í™€ì§ ì„ íƒ ì˜ì—­ */
    .parity-selection {
      text-align: center;
      margin-bottom: 30px;
    }

    .parity-selection h3 {
      margin-bottom: 20px;
      color: #333;
      font-size: 20px;
    }

    .parity-buttons {
      display: flex;
      gap: 20px;
      justify-content: center;
    }

    .parity-btn {
      padding: 20px 50px;
      font-size: 22px;
      border: 3px solid #667eea;
      background: white;
      color: #667eea;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
    }

    .parity-btn:hover {
      background: #667eea;
      color: white;
      transform: scale(1.05);
    }

    .parity-btn.selected {
      background: #667eea;
      color: white;
    }

    /* ê²Œì„ ë³´ë“œ */
    .game-board {
      margin: 20px 0;
    }

    /* ì˜ì—­ êµ¬ë¶„ */
    .player-section {
      padding: 15px;
      border-radius: 15px;
      margin: 15px 0;
    }

    .computer-section {
      background: #ffe4e4;
      border: 3px solid #e74c3c;
      position: relative;
    }

    .computer-section.odd {
      background: #e4f0ff;
      border: 3px solid #3498db;
    }

    .computer-section.even {
      background: #ffe4e4;
      border: 3px solid #e74c3c;
    }

    .user-section {
      background: #e4f0ff;
      border: 3px solid #3498db;
      position: relative;
    }

    .user-section.odd {
      background: #e4f0ff;
      border: 3px solid #3498db;
    }

    .user-section.even {
      background: #ffe4e4;
      border: 3px solid #e74c3c;
    }

    .parity-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 12px;
      font-weight: bold;
      border: 2px solid;
    }

    .parity-badge.odd {
      color: #3498db;
      border-color: #3498db;
    }

    .parity-badge.even {
      color: #e74c3c;
      border-color: #e74c3c;
    }

    .section-title {
      font-size: 24px;
      font-weight: bold;
      text-align: center;
      margin-bottom: 15px;
    }

    .computer-section .section-title {
      color: #e74c3c;
    }

    .user-section .section-title {
      color: #3498db;
    }

    /* ì† í‘œì‹œ */
    .hand-display {
      text-align: center;
      font-size: 80px;
      margin: 10px 0;
      min-height: 100px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .hand-icon {
      animation: shake 0.5s;
    }

    @keyframes shake {
      0%, 100% { transform: rotate(0deg); }
      25% { transform: rotate(-15deg); }
      75% { transform: rotate(15deg); }
    }

    /* ì£¼ì‚¬ìœ„ ì˜ì—­ */
    .dice-area {
      text-align: center;
      min-height: 120px;
      margin: 20px 0;
    }

    .dice-container {
      display: flex;
      gap: 15px;
      justify-content: center;
      flex-wrap: wrap;
      margin: 20px 0;
    }

    .dice {
      width: 80px;
      height: 80px;
      background: white;
      border: 4px solid #333;
      border-radius: 12px;
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      grid-template-rows: repeat(3, 1fr);
      padding: 8px;
      gap: 4px;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }

    .dice.rolling {
      animation: roll 0.5s infinite;
    }

    @keyframes roll {
      0% { transform: rotate(0deg) scale(1); }
      25% { transform: rotate(90deg) scale(1.1); }
      50% { transform: rotate(180deg) scale(1); }
      75% { transform: rotate(270deg) scale(1.1); }
      100% { transform: rotate(360deg) scale(1); }
    }

    .dot {
      width: 100%;
      height: 100%;
      border-radius: 50%;
      background: #333;
    }

    /* ì•¡ì…˜ ë²„íŠ¼ */
    .action-btn {
      display: block;
      margin: 20px auto;
      padding: 18px 60px;
      font-size: 22px;
      background: #667eea;
      color: white;
      border: none;
      border-radius: 50px;
      cursor: pointer;
      transition: all 0.3s;
      font-weight: bold;
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }

    .action-btn:hover {
      background: #5568d3;
      transform: scale(1.05);
      box-shadow: 0 6px 16px rgba(102, 126, 234, 0.6);
    }

    .action-btn:disabled {
      background: #ccc;
      cursor: not-allowed;
      transform: none;
      box-shadow: none;
    }

    /* ê²°ê³¼ ë©”ì‹œì§€ */
    .result-message {
      text-align: center;
      font-size: 18px;
      font-weight: bold;
      color: white;
      background: #667eea;
      margin: 20px auto;
      padding: 15px 25px;
      border-radius: 12px;
      min-height: 30px;
      line-height: 1.6;
      max-width: 500px;
      box-shadow: 0 3px 10px rgba(102, 126, 234, 0.3);
    }

    /* ì£¼ì‚¬ìœ„ ê°œìˆ˜ í‘œì‹œ */
    .dice-count-display {
      text-align: center;
      margin: 30px 0;
      padding: 20px;
      background: #f8f9fa;
      border-radius: 15px;
    }

    .dice-count-display h4 {
      font-size: 20px;
      margin-bottom: 15px;
      color: #3498db;
    }

    .mini-dice-container {
      display: flex;
      gap: 8px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .mini-dice {
      width: 40px;
      height: 40px;
      background: white;
      border: 3px solid #3498db;
      border-radius: 8px;
      display: flex;
      justify-content: center;
      align-items: center;
      font-size: 24px;
      box-shadow: 0 2px 6px rgba(0, 0, 0, 0.2);
    }

    /* ìŠ¹ë¦¬ ë©”ì‹œì§€ */
    .winner-announcement {
      text-align: center;
      font-size: 32px;
      font-weight: bold;
      margin: 30px 0;
      padding: 20px;
      border-radius: 15px;
      animation: bounce 1s infinite;
    }

    .winner-announcement.win {
      background: #d4edda;
      color: #155724;
      border: 3px solid #28a745;
    }

    .winner-announcement.lose {
      background: #f8d7da;
      color: #721c24;
      border: 3px solid #dc3545;
    }

    @keyframes bounce {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-10px); }
    }

    .restart-btn {
      background: #28a745;
      margin-top: 20px;
    }

    .restart-btn:hover {
      background: #218838;
    }

    /* ì „ì  í‘œì‹œ */
    .stats-display {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 12px;
      font-size: 18px;
      font-weight: bold;
      color: #667eea;
    }

    /* ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒ ë²„íŠ¼ë“¤ */
    .stats-display {
      text-align: center;
      margin: 20px 0;
      padding: 15px;
      background: #f8f9fa;
      border-radius: 12px;
      font-size: 18px;
      font-weight: bold;
      color: #667eea;
    }

    /* ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒ ë²„íŠ¼ë“¤ */
    .rps-choices {
      display: flex;
      gap: 15px;
      justify-content: center;
      margin: 20px 0;
    }

    .rps-choice-btn {
      padding: 20px 30px;
      font-size: 50px;
      background: white;
      border: 4px solid #667eea;
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    }

    .rps-choice-btn:hover {
      transform: scale(1.1);
      background: #667eea;
      box-shadow: 0 6px 12px rgba(0, 0, 0, 0.3);
    }
  </style>
</head>
<body>
  <!-- ê²Œì„ ì„¤ëª… ëª¨ë‹¬ -->
  <div id="ruleModal" class="modal hidden">
    <div class="modal-content">
      <h2>ğŸ² ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„</h2>
      <p><strong>ê²Œì„ ê·œì¹™:</strong></p>
      <p>1. í™€ìˆ˜ ë˜ëŠ” ì§ìˆ˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</p>
      <p>2. ê²Œì„ ì‹œì‘ ì‹œ ì£¼ì‚¬ìœ„ 6ê°œê°€ ìë™ìœ¼ë¡œ êµ´ëŸ¬ê°‘ë‹ˆë‹¤</p>
      <p>3. ê°€ìœ„ë°”ìœ„ë³´ì—ì„œ ì§„ ì‚¬ëŒì´ <strong>ìê¸°ê°€ ê°€ì§„ ì£¼ì‚¬ìœ„ë§Œ</strong> êµ´ë¦½ë‹ˆë‹¤</p>
      <p>4. ì„ íƒí•œ í™€/ì§ì— ë§ëŠ” ì£¼ì‚¬ìœ„ë¥¼ ê°€ì ¸ê°‘ë‹ˆë‹¤</p>
      <p>5. <strong>ìƒëŒ€ë°©ì˜ ì£¼ì‚¬ìœ„ë¥¼ ëª¨ë‘ ê°€ì ¸ì˜¤ë©´ ìŠ¹ë¦¬!</strong></p>
      <button class="confirm-btn" onclick="startGame()">ê²Œì„ ì‹œì‘í•˜ê¸°</button>
    </div>
  </div>

  <!-- ê²Œì„ ì»¨í…Œì´ë„ˆ -->
  <div id="gameContainer" class="game-container">
    <h1>ğŸ² ì£¼ì‚¬ìœ„ í™€ì§ ê²Œì„</h1>

    <!-- í™€ì§ ì„ íƒ -->
    <div id="paritySelection" class="parity-selection hidden">
      <h3>í™€ìˆ˜ì™€ ì§ìˆ˜ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”</h3>
      <div class="parity-buttons">
        <button class="parity-btn" onclick="selectParity(&#39;odd&#39;)">í™€ìˆ˜ ğŸ”µ</button>
        <button class="parity-btn selected" onclick="selectParity(&#39;even&#39;)">ì§ìˆ˜ ğŸ”´</button>
      </div>
    </div>

    <!-- ê²Œì„ ë³´ë“œ -->
    <div id="gameBoard" class="game-board">
      <!-- ì»´í“¨í„° ì˜ì—­ -->
      <div class="player-section computer-section odd" id="computerSection">
        <div class="section-title">ğŸ’» ì»´í“¨í„° (<span id="computerDiceCount">1</span>ê°œ)</div>
        <div class="hand-display" id="computerHandDisplay"><div class="hand-icon">âœŠ</div></div>
      </div>

      <!-- ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ì˜ì—­ -->
      <div class="dice-area">
        <div id="diceContainer" class="dice-container"><div class="dice"><div><div class="dot"></div></div><div></div><div><div class="dot"></div></div><div></div><div></div><div></div><div><div class="dot"></div></div><div></div><div><div class="dot"></div></div></div><div class="dice"><div><div class="dot"></div></div><div></div><div></div><div></div><div><div class="dot"></div></div><div></div><div></div><div></div><div><div class="dot"></div></div></div></div>
      </div>

      <!-- ê²°ê³¼ ë©”ì‹œì§€ -->
      <div id="resultMessage" class="result-message">ë‚´ê°€ ê°€ìœ„ë°”ìœ„ë³´ì—ì„œ ì´ê²¼ë‹¤! ì£¼ì‚¬ìœ„ 1ê°œë¥¼ ì–»ì—ˆë‹¤!</div>

      <!-- ìœ ì € ì˜ì—­ -->
      <div class="player-section user-section even" id="userSection">
        <span class="parity-badge even" id="userParityBadge">ì§ìˆ˜</span>
        <div class="section-title">ğŸ‘¤ ë‚˜ (<span id="userDiceCount">5</span>ê°œ)</div>
        
        <!-- ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒ ë²„íŠ¼ë“¤ (ìœ ì € ë°•ìŠ¤ ì•ˆì—) -->
        <div id="rpsChoices" class="rps-choices">
          <button class="rps-choice-btn" onclick="makeRPSChoice(0)">âœŒ</button>
          <button class="rps-choice-btn" onclick="makeRPSChoice(1)">âœŠ</button>
          <button class="rps-choice-btn" onclick="makeRPSChoice(2)">ğŸ–</button>
        </div>
        
        <div class="hand-display" id="userHandDisplay"><div class="hand-icon">ğŸ–</div></div>
      </div>

      <!-- ìŠ¹ë¦¬/íŒ¨ë°° ë©”ì‹œì§€ -->
      <div id="winnerAnnouncement" class="winner-announcement win"></div>

      <!-- ì „ì  í‘œì‹œ -->
      <div id="statsDisplay" class="stats-display">
        ì´ ì „ì : <span id="winCount">1</span>ìŠ¹ <span id="loseCount">0</span>íŒ¨
      </div>

      <!-- ë‚´ ì£¼ì‚¬ìœ„ í‘œì‹œ -->
      <div class="dice-count-display">
        <h4>ë‚´ê°€ ê°€ì§„ ì£¼ì‚¬ìœ„</h4>
        <div id="userInventory" class="mini-dice-container"><div class="mini-dice">ğŸ²</div><div class="mini-dice">ğŸ²</div><div class="mini-dice">ğŸ²</div><div class="mini-dice">ğŸ²</div><div class="mini-dice">ğŸ²</div></div>
      </div>

      <!-- ë‹¤ì‹œí•˜ê¸° ë²„íŠ¼ -->
      <button id="restartButton" class="action-btn restart-btn hidden" onclick="restartGame()">ğŸ”„ ë‹¤ì‹œ í•˜ê¸°</button>
    </div>
  </div>

  <script>
    // ============ ê²Œì„ ìƒíƒœ ë³€ìˆ˜ ============
    let userParity = null;
    let computerParity = null;
    let userDiceTotal = 0;
    let computerDiceTotal = 0;
    let gameStarted = false;
    let isRolling = false;
    let gameOver = false;
    let winCount = 0;
    let loseCount = 0;

    // ============ ì‚¬ìš´ë“œ íš¨ê³¼ ============
    function playClickSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const oscillator = audioContext.createOscillator();
      const gainNode = audioContext.createGain();
      
      oscillator.connect(gainNode);
      gainNode.connect(audioContext.destination);
      
      oscillator.frequency.value = 1000;
      oscillator.type = 'square';
      gainNode.gain.setValueAtTime(0.1, audioContext.currentTime);
      gainNode.gain.exponentialRampToValueAtTime(0.01, audioContext.currentTime + 0.05);
      
      oscillator.start(audioContext.currentTime);
      oscillator.stop(audioContext.currentTime + 0.05);
    }

    function playDiceRollSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      
      for (let i = 0; i < 3; i++) {
        setTimeout(() => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = 150 + Math.random() * 100;
          oscillator.type = 'square';
          gainNode.gain.value = 0.05;
          
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.1);
        }, i * 150);
      }
    }

    function playWinSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const notes = [523, 659, 784, 1047]; // C-E-G-C
      
      notes.forEach((freq, i) => {
        setTimeout(() => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          gainNode.gain.value = 0.2;
          
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.3);
        }, i * 150);
      });
    }

    function playLoseSound() {
      const audioContext = new (window.AudioContext || window.webkitAudioContext)();
      const notes = [392, 349, 294, 262]; // G-F-D-C (ë‚´ë¦¼)
      
      notes.forEach((freq, i) => {
        setTimeout(() => {
          const oscillator = audioContext.createOscillator();
          const gainNode = audioContext.createGain();
          
          oscillator.connect(gainNode);
          gainNode.connect(audioContext.destination);
          
          oscillator.frequency.value = freq;
          oscillator.type = 'sine';
          gainNode.gain.value = 0.2;
          
          oscillator.start();
          oscillator.stop(audioContext.currentTime + 0.3);
        }, i * 150);
      });
    }

    // ============ ì£¼ì‚¬ìœ„ ì  ê·¸ë¦¬ê¸° ============
    function createDiceFace(value) {
      const dice = document.createElement('div');
      dice.className = 'dice';
      
      const positions = {
        1: [[1, 1]],
        2: [[0, 0], [2, 2]],
        3: [[0, 0], [1, 1], [2, 2]],
        4: [[0, 0], [0, 2], [2, 0], [2, 2]],
        5: [[0, 0], [0, 2], [1, 1], [2, 0], [2, 2]],
        6: [[0, 0], [0, 2], [1, 0], [1, 2], [2, 0], [2, 2]]
      };
      
      for (let i = 0; i < 9; i++) {
        const cell = document.createElement('div');
        const row = Math.floor(i / 3);
        const col = i % 3;
        
        if (positions[value].some(pos => pos[0] === row && pos[1] === col)) {
          const dot = document.createElement('div');
          dot.className = 'dot';
          cell.appendChild(dot);
        }
        
        dice.appendChild(cell);
      }
      
      return dice;
    }

    // ============ ê²Œì„ ì‹œì‘ ============
    function startGame() {
      playClickSound();
      document.getElementById('ruleModal').classList.add('hidden');
      document.getElementById('gameContainer').classList.remove('hidden');
    }

    // ============ í™€ì§ ì„ íƒ ============
    function selectParity(parity) {
      playClickSound();
      userParity = parity;
      computerParity = parity === 'odd' ? 'even' : 'odd';
      
      const buttons = document.querySelectorAll('.parity-btn');
      buttons.forEach(btn => btn.classList.remove('selected'));
      event.target.classList.add('selected');
      
      // ìœ ì €ì™€ ì»´í“¨í„° ë°•ìŠ¤ ìƒ‰ìƒ ë³€ê²½
      const userSection = document.getElementById('userSection');
      const computerSection = document.getElementById('computerSection');
      const parityBadge = document.getElementById('userParityBadge');
      
      if (parity === 'odd') {
        // ìœ ì €ê°€ í™€ìˆ˜ ì„ íƒ â†’ ìœ ì €ëŠ” íŒŒë€ìƒ‰, ì»´í“¨í„°ëŠ” ë¹¨ê°„ìƒ‰
        userSection.classList.remove('even');
        userSection.classList.add('odd');
        computerSection.classList.remove('odd');
        computerSection.classList.add('even');
        parityBadge.textContent = 'í™€ìˆ˜';
        parityBadge.className = 'parity-badge odd';
      } else {
        // ìœ ì €ê°€ ì§ìˆ˜ ì„ íƒ â†’ ìœ ì €ëŠ” ë¹¨ê°„ìƒ‰, ì»´í“¨í„°ëŠ” íŒŒë€ìƒ‰
        userSection.classList.remove('odd');
        userSection.classList.add('even');
        computerSection.classList.remove('even');
        computerSection.classList.add('odd');
        parityBadge.textContent = 'ì§ìˆ˜';
        parityBadge.className = 'parity-badge even';
      }
      
      if (!gameStarted) {
        gameStarted = true;
        setTimeout(() => {
          rollInitialDice();
        }, 500);
      }
    }

    // ============ ì´ˆê¸° ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ============
    function rollInitialDice() {
      document.getElementById('paritySelection').classList.add('hidden');
      document.getElementById('gameBoard').classList.remove('hidden');
      document.getElementById('resultMessage').textContent = 'ê²Œì„ ì‹œì‘! ì£¼ì‚¬ìœ„ 6ê°œë¥¼ êµ´ë¦½ë‹ˆë‹¤...';
      document.getElementById('rpsChoices').classList.add('hidden');
      
      rollDice(6, null, 'initial');
    }

    // ============ ì£¼ì‚¬ìœ„ êµ´ë¦¬ê¸° ============
    function rollDice(count, loser, type) {
      if (isRolling) return;
      isRolling = true;
      
      playDiceRollSound();
      
      const container = document.getElementById('diceContainer');
      container.innerHTML = '';
      
      const diceElements = [];
      for (let i = 0; i < count; i++) {
        const dice = document.createElement('div');
        dice.className = 'dice rolling';
        container.appendChild(dice);
        diceElements.push(dice);
      }
      
      // 1.2ì´ˆ í›„ ê²°ê³¼ í‘œì‹œ (ì†ë„ ê°œì„ )
      setTimeout(() => {
        const results = [];
        container.innerHTML = '';
        
        for (let i = 0; i < count; i++) {
          const value = Math.floor(Math.random() * 6) + 1;
          results.push(value);
          const diceFace = createDiceFace(value);
          container.appendChild(diceFace);
        }
        
        setTimeout(() => {
          distributeDice(results, loser, type);
          isRolling = false;
        }, 1000);
      }, 1200);
    }

    // ============ ì£¼ì‚¬ìœ„ ë°°ë¶„ ============
    function distributeDice(results, loser, type) {
      let oddCount = 0;
      let evenCount = 0;
      
      results.forEach(value => {
        if (value % 2 === 0) evenCount++;
        else oddCount++;
      });
      
      if (type === 'initial') {
        if (userParity === 'odd') {
          userDiceTotal = oddCount;
          computerDiceTotal = evenCount;
        } else {
          userDiceTotal = evenCount;
          computerDiceTotal = oddCount;
        }
        
        document.getElementById('resultMessage').textContent = 
          `ê²Œì„ ì‹œì‘! ê°€ìœ„, ë°”ìœ„, ë³´ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”!`;
      } else {
        // ê°€ìœ„ë°”ìœ„ë³´ í›„ ë°°ë¶„ - ë©”ì‹œì§€ ê°„ì†Œí™”
        if (loser === 'user') {
          let userKeep = userParity === 'odd' ? oddCount : evenCount;
          let lost = userDiceTotal - userKeep;
          
          userDiceTotal = userKeep;
          computerDiceTotal += (userParity === 'odd' ? evenCount : oddCount);
          
          document.getElementById('resultMessage').textContent = 
            `ë‚´ê°€ ê°€ìœ„ë°”ìœ„ë³´ì—ì„œ ì¡Œë‹¤. ì£¼ì‚¬ìœ„ ${lost}ê°œë¥¼ ìƒì—ˆë‹¤.`;
        } else {
          let computerKeep = computerParity === 'odd' ? oddCount : evenCount;
          let gained = computerParity === 'odd' ? evenCount : oddCount;
          
          computerDiceTotal = computerKeep;
          userDiceTotal += gained;
          
          document.getElementById('resultMessage').textContent = 
            `ë‚´ê°€ ê°€ìœ„ë°”ìœ„ë³´ì—ì„œ ì´ê²¼ë‹¤! ì£¼ì‚¬ìœ„ ${gained}ê°œë¥¼ ì–»ì—ˆë‹¤!`;
        }
      }
      
      updateInventory();
      checkWinner();
      
      if (!gameOver) {
        document.getElementById('rpsChoices').classList.remove('hidden');
        // ì£¼ì‚¬ìœ„ ì´ë¯¸ì§€ë¥¼ ìœ ì§€ (ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒí•  ë•Œê¹Œì§€)
      }
    }

    // ============ ê°€ìœ„ë°”ìœ„ë³´ ì„ íƒ ============
    function makeRPSChoice(userHandIndex) {
      if (isRolling || gameOver) return;
      
      playClickSound();
      document.getElementById('rpsChoices').classList.add('hidden');
      document.getElementById('resultMessage').textContent = '';
      document.getElementById('userHandDisplay').innerHTML = '';
      document.getElementById('computerHandDisplay').innerHTML = '';
      document.getElementById('diceContainer').innerHTML = '';
      
      const hands = ['âœŒ', 'âœŠ', 'ğŸ–']; // ê°€ìœ„, ë°”ìœ„, ë³´
      const handNames = ['ê°€ìœ„', 'ë°”ìœ„', 'ë³´'];
      
      const computerHandIndex = Math.floor(Math.random() * 3);
      
      setTimeout(() => {
        const userHandIcon = document.createElement('div');
        userHandIcon.className = 'hand-icon';
        userHandIcon.textContent = hands[userHandIndex];
        document.getElementById('userHandDisplay').appendChild(userHandIcon);
        
        const computerHandIcon = document.createElement('div');
        computerHandIcon.className = 'hand-icon';
        computerHandIcon.textContent = hands[computerHandIndex];
        document.getElementById('computerHandDisplay').appendChild(computerHandIcon);
        
        setTimeout(() => {
          if (userHandIndex === computerHandIndex) {
            document.getElementById('resultMessage').textContent = 'ë¬´ìŠ¹ë¶€! ë‹¤ì‹œ ì„ íƒí•˜ì„¸ìš”!';
            document.getElementById('rpsChoices').classList.remove('hidden');
            return;
          }
          
          // ê°€ìœ„(0)ëŠ” ë³´(2)ë¥¼ ì´ê¹€, ë°”ìœ„(1)ëŠ” ê°€ìœ„(0)ë¥¼ ì´ê¹€, ë³´(2)ëŠ” ë°”ìœ„(1)ë¥¼ ì´ê¹€
          const userWins = 
            (userHandIndex === 0 && computerHandIndex === 2) ||
            (userHandIndex === 1 && computerHandIndex === 0) ||
            (userHandIndex === 2 && computerHandIndex === 1);
          
          let loser;
          if (userWins) {
            loser = 'computer';
            setTimeout(() => {
              rollDice(computerDiceTotal, loser, 'round');
            }, 1000);
          } else {
            loser = 'user';
            setTimeout(() => {
              rollDice(userDiceTotal, loser, 'round');
            }, 1000);
          }
        }, 1000);
      }, 500);
    }

    // ============ ì¸ë²¤í† ë¦¬ ì—…ë°ì´íŠ¸ ============
    function updateInventory() {
      document.getElementById('userDiceCount').textContent = userDiceTotal;
      document.getElementById('computerDiceCount').textContent = computerDiceTotal;
      
      const userInventory = document.getElementById('userInventory');
      userInventory.innerHTML = '';
      
      for (let i = 0; i < userDiceTotal; i++) {
        const dice = document.createElement('div');
        dice.className = 'mini-dice';
        dice.textContent = 'ğŸ²';
        userInventory.appendChild(dice);
      }
    }

    // ============ ìŠ¹ë¦¬ ì²´í¬ ============
    function checkWinner() {
      if (userDiceTotal === 0) {
        gameOver = true;
        loseCount++;
        playLoseSound();
        
        const announcement = document.getElementById('winnerAnnouncement');
        announcement.className = 'winner-announcement lose';
        announcement.textContent = 'ğŸ˜¢ íŒ¨ë°°! ì»´í“¨í„°ê°€ ëª¨ë“  ì£¼ì‚¬ìœ„ë¥¼ ê°€ì ¸ê°”ìŠµë‹ˆë‹¤!';
        document.getElementById('rpsChoices').classList.add('hidden');
        document.getElementById('restartButton').classList.remove('hidden');
        document.getElementById('statsDisplay').classList.remove('hidden');
        updateStats();
      } else if (computerDiceTotal === 0) {
        gameOver = true;
        winCount++;
        playWinSound();
        
        const announcement = document.getElementById('winnerAnnouncement');
        announcement.className = 'winner-announcement win';
        announcement.textContent = 'ğŸ‰ ìŠ¹ë¦¬! ëª¨ë“  ì£¼ì‚¬ìœ„ë¥¼ ê°€ì ¸ì™”ìŠµë‹ˆë‹¤!';
        document.getElementById('rpsChoices').classList.add('hidden');
        document.getElementById('restartButton').classList.remove('hidden');
        document.getElementById('statsDisplay').classList.remove('hidden');
        updateStats();
      }
    }

    // ============ ì „ì  ì—…ë°ì´íŠ¸ ============
    function updateStats() {
      document.getElementById('winCount').textContent = winCount;
      document.getElementById('loseCount').textContent = loseCount;
    }

    // ============ ê²Œì„ ì¬ì‹œì‘ ============
    function restartGame() {
      playClickSound();
      
      userParity = null;
      computerParity = null;
      userDiceTotal = 0;
      computerDiceTotal = 0;
      gameStarted = false;
      isRolling = false;
      gameOver = false;
      // winCount, loseCountëŠ” ìœ ì§€
      
      document.getElementById('gameBoard').classList.add('hidden');
      document.getElementById('paritySelection').classList.remove('hidden');
      document.getElementById('restartButton').classList.add('hidden');
      document.getElementById('rpsChoices').classList.add('hidden');
      document.getElementById('winnerAnnouncement').innerHTML = '';
      document.getElementById('resultMessage').textContent = '';
      document.getElementById('diceContainer').innerHTML = '';
      document.getElementById('userHandDisplay').innerHTML = '';
      document.getElementById('computerHandDisplay').innerHTML = '';
      
      const buttons = document.querySelectorAll('.parity-btn');
      buttons.forEach(btn => btn.classList.remove('selected'));
    }
  </script>


</body></html>